import pygame
import csv
 #death zones use normal coords, not tile-based 



class Tile:
    def __init__(self, rect, tile_type="normal"):
        self.rect = rect
        self.type = tile_type
class crackedTile(Tile):
    def __init__(self,rect):
        super().__init__(
            rect, tile_type="cracked"
        )
        self.timer = 15
        self.physical = True
        self.triggered = False
        self.flash = 0


TILE_MAPPING = {
    0: ("normal", lambda rect: Tile(rect, "normal")),  
    1: ("bounce", lambda rect: Tile(rect, "bounce")),
    2: ("item", None),  
    3: ("interact", lambda rect: Tile(rect, "interact")),
    4: ("ice", lambda rect: Tile(rect, "ice")),
    5: ("autobounce", lambda rect: Tile(rect, "autobounce")),
    6: ("darkest", lambda rect: Tile(rect, "darkest")),
    7: ("dark", lambda rect: Tile(rect, "dark")),
    8: ("darkisher", lambda rect: Tile(rect, "darkisher")),
    9: ("darkish", lambda rect: Tile(rect, "darkish")),
    10: ("left", lambda rect: Tile(rect, "left")),
    11: ("right", lambda rect: Tile(rect, "right")),
    12: ("cracked", lambda rect: crackedTile(rect)),
    13: ("laserleft",lambda rect: Tile(rect, "laserleft")),
    14: ("laser", lambda rect: Tile(rect, "laser")),
    15: ("laserright", lambda rect: Tile(rect, "laserright"))

}

def build_platforms_from_csv(level_key, tile_size):
    layout = load_csv_layout(levels[level_key]["csv"])
    platforms = []
    room_item, room_item_pos = None, None
    cracked_tiles = []
    lasers = []

    for y, row in enumerate(layout):
        for x, cell in enumerate(row):
            rect = pygame.Rect(x * tile_size, y * tile_size, tile_size, tile_size) 
            mapping = TILE_MAPPING.get(cell)
            if mapping is None:
                continue  #air

            tile_type, factory = mapping if isinstance(mapping, tuple) else (mapping[0], None)
            if tile_type not in ["laser", "laserleft", "laser_right"]:
                rect = pygame.Rect(x * tile_size, y * tile_size, tile_size, tile_size)  
            else:
                rect = pygame.Rect(x * tile_size, y * tile_size, tile_size, 5) 



            if tile_type == "item" and not levels[level_key].get("collected", False):
                room_item = levels[level_key].get("item", "Unknown Relic")
                room_item_pos = pygame.math.Vector2(
                    x * tile_size + tile_size // 2,
                    y * tile_size + tile_size // 2
                )
                continue  
            
            elif factory is None:
                continue  # safety

            else:
                tile = factory(rect)
                if tile is not None:  # extra safety
                    platforms.append(tile)
                    if tile_type == "cracked":
                        cracked_tiles.append(tile)
                    elif tile_type in ["laser", "laserleft", "laserright"]: 
                        lasers.append(tile)
    return platforms, room_item, room_item_pos, cracked_tiles,lasers

def load_csv_layout(filename):
    import csv,os
    path = os.path.join("maps", "csv", filename)
    with open(path) as file:
        return [list(map(int, row)) for row in csv.reader(file, delimiter=',')]

def get_spawn(current_level, spawn_side, tile_size):
    x, y = levels[current_level][spawn_side]
    return x * tile_size, y * tile_size

def build_platforms(current_level, tile_size): #extinct

    platforms = []
    room_item, room_item_pos = None, None

    for y, row in enumerate(levels[current_level]["layout"]):
        for x, cell in enumerate(row):
            if cell == "#":
                platforms.append(Tile(pygame.Rect(x * tile_size, y * tile_size, tile_size, tile_size), "normal"))
            elif cell == "B":
                platforms.append(Tile(pygame.Rect(x * tile_size, y * tile_size, tile_size, tile_size), "bounce"))
            elif cell == "R":
                if not levels[current_level].get("collected", False):
                    room_item = levels[current_level]["item"]
                    room_item_pos = pygame.math.Vector2(x * tile_size + tile_size//2, y * tile_size + tile_size//2)

                    
    
    return platforms, room_item, room_item_pos

def room_vars_from_csv(level_key, tile_size):
    layout = load_csv_layout(levels[level_key]["csv"])
    room_width = tile_size * len(layout[0])
    room_height = tile_size * len(layout)
    return room_width, room_height

def room_vars(current_level, tile_size):
    room_width = tile_size * len(levels[current_level]["layout"][0])
    room_height = tile_size * len(levels[current_level]["layout"])
    return room_width, room_height

levels = {
    "room_1": {
        'spawn_left': (1, 10),
        'spawn_right': (58, 44),
        'exits': {'right': 'room_2', 'left': 'factory_1'},
        'csv': "room_1.csv"
    },
    "room_2": {
        'spawn_left': (2,26),
        'spawn_right': (58,37),
        'exits': {'left': 'room_1', 'right': 'room_3'},
        'csv': "room_2.csv"
    },
    "room_3": {
        'spawn_left': (3,34),
        'spawn_right': (57, 34),
        'spawn_up': (22, 5),
        'exits': {'left': 'room_2', 'up': 'room_103', 'right': 'room_4'},
        'csv': 'room_3.csv'
    },
    "room_103": {
        'spawn_left': (1, 4),
        'spawn_right': (75, 4),
        'spawn_down': (43, 29),
        'exits': {'down': 'room_3', 'left': 'room_102', 'right': 'room_104'},
        'layout': ['###############################################################################', '###############################################################################', '###############################################################################', '###############################################################################', '..........####..........#..........#.............................#......#......', '......#.............#.........#.............................###......#.........', '################################################......#########################', '#############################################.........#########################', '############################################.........##########################', '##########################################..........###########################', '##############################.....................##..########################', '##########################..........................##..#######################', '#####################............................###.....######################', '###################.........................####..........#####################', '#################...............########..................#####################', '###############............####..####.######..............#####################', '#############......###....................................#####################', '###########...............................................#####################', '#############.........###.................................#####################', '############...####...........#B##........................#####################', '#############.................##...................#......#####################', '###########................#####.......#####........####..#####################', '###########............................#####......#####...#####################', '#############........####..............#####..............#####################', '########..........#########...............................#####################', '########.............................................##########################', '####################..............###########.................#################', '##########....######.........#####...........##.................###############', '###########.....................................................###############', '##############...###....###...................................#################', '####################..........................#################################', '#################################.........#####################################', '###################################.......#####################################'],
    },
    "room_102": {
        'spawn_right': (75, 4),
        'exits': {'right': 'room_103'},
        'item': 'Resilience',
        'collected': False,
        'layout': ['##############################################################################', '##############################################################################', '###############..............................................................#', '########.....................##..............................................#', '#..........................##..##............................................#', '#.........................##....##............................................', '#........................##......##...........................................', '#.......................##........##.......................................###', '#......................##..........##.....................................#.##', '#.....................##............##....................................##.#', '#....................##........R.....##..................................#.#.#', '#...................##........##......##.................................#.#.#', '#..................##..................##...............................##.#.#', '#.................##....................##..............................##.#.#', '#................##........BBBB..........##............................##.#.##', '#...............##........................##...........................##.#.##', '#..............##...............##.........##.........................B#.#.#.#', '#.............##............................##........................#.#.#.##', '#............##....................###.......##......................B.#.#.#.#', '#...........##................................##.....................##.#.#.##', '#..........##..................................##...................B#.#.#.#.#', '#.........##..........................###.......##..................#.#.#.#.##', '#........##......................................##................B.#.#.#.#.#', '#.......##.....................####...............##...............##.#.#.#.#.', '#......##..............###.........................##.............#.#.#.#.#.##', '#.....##............................................##............##.#.#.#.#.#', '#....##..............................................##..........B#.#.#.#.#.##', '#...##.........................###....................##.........#.#.#.#.#.#.#', '#..##..................................................##.......##.#.#.#.#.#.#', '#..........................##...........................##......#.#.#.#.#.#.##', '###......................##..............................#####################', '###############################################################################'],
    },
    "room_104": {
        'spawn_left': (0, 4),
        'spawn_up': (74, 3),
        'exits': {'left': 'room_103', 'up': 'loft_1'},
        'layout': ['................................................................................##', '...............................................................................##.', '..............................................................................##..', '.............................................................................###..', '............................................................................####..', '...........................................................................####...', '##.......................................................................######...', '..................................................................................', '....####..........................................................#####...........', '........................................................####......................', '.........####.....####....####..........####......................................', '..................................................................................', '................................####.............####.............................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................'],
    },
    "loft_1": {
        'spawn_left': (1, 44),
        'spawn_down': (68, 77),
        "spawn_up": (58,5),
        "spawn_right": (77,44),
        'exits': {'left': 'loft_0',
                   'down': 'room_104',
                    # 'right': "loft_2", 
                    # "up": "loft_101"
                     },
        'death_zone': [pygame.Rect(0, 2528, 1856, 64)],
        'title': 'The Loft',
        'csv': "loft_1.csv",
    },
    "loft_0": {
        'spawn_right': (77,58),
        "spawn_left": (2,26), 
        "spawn_up": (40,4),
        "exits": {
            #'left': "loft_-1",
            "right": "loft_1",
            #"up": "loft_100",
            
        },
        "csv": "loft_0.csv"
    },

    "room_4": {
        'spawn_left': (2, 6),
        'spawn_right': (74, 17),
        'spawn_down': (6, 25),
        'exits': {'left': 'room_3', 'right': 'room_5', 'down': 'cavern_1_4'},
        'death_zone': [pygame.Rect(576, 1024, 1920, 32)],
        'layout': ['##############################################################################', '##############################################################################', '######################.........................................###############', '##########.............................................................#######', '####...............................................##...#.#...............####', '##.............................................############................###', '##.................############.......................#####................###', '##........................................................................####', '##.......................###.............................................#####', '##................................###################...................######', '......................................######..........................##....##', '.......................................####.....................####........##', '###.....................................##.....###.###.####.................##', '##...................................................................##.....##', '##..##...................##..................#####..##...####...............##', '##............................................###.........##......##....#...##', '##.......................................##.................................##', '##.......####.................................####....###...###........##...##', '##........................###....####.........................................', '###...................................###....###.###....###...................', '##...##.........####.........................................###............##', '##..............................................##.......................#####', '##........#..............................###......................############', '##.#......B..........#####...............###.........................#########', '##........#..........................................................#########', '##........#..#.......................................................#########', '###.....#.#.#........................................................#########', '##.......##B....##...................................................#########', '##........#..........................................................#########', '##...................................................................#########', '########.....###....................................................##########', '#########...#######.................................................##########'],
    },
    "cavern_1_4": {
        'spawn_left': (2, 13),
        'spawn_right': (79, 12),
        'spawn_up': (10, 0),
        'exits': {'left': 'cavern_0_3', 'right': 'cavern_2_5', 'up': 'room_4'},
        'title': 'The Caverns',
        'layout': ['##.............###################################################################', '#######........#..####...######....#####....####...###...###.#########............', '.......#..........####....####......###.....###.....##....##..########............', '........#..........##.....####......###......#.......#.....#...#######............', '........#..........##.....###........#.......#...................#####............', '.........#..........#.....###........#...........................####.............', '.........#.................#......................................###.............', '..........#................#......................................###.............', '..........#.......................................................###.............', '...........#.......................................................##.............', '...........#........................................................#.............', '............#.....................................................................', '................##......................................................#.........', '...........###...............##......................##...........###.............', '.....##.#...........##.............###..........##..............##................', '................##...........###...........##............................##.......', '........###..............#.......##..............###..................##..........', '#######......####.....##................###................##.................####', '...................##...........##..............##...............##...............', '....................###..............##.............###....................##.....', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................', '..................................................................................'],
    },
    "cavern_0_3": {
        'spawn_left': (3, 12),
        'spawn_right': (77, 21),
        'spawn_down': (17, 38),
        'exits': {'right': 'cavern_1_4', 'left': 'cavern_-1_2', 'down': 'cavern_100_3'},
        'death_zone': [pygame.Rect(1350, 1410, 700, 32)],
        'layout': ['################################################################################', '################################################################################', '################################################################################', '################################################################################', '################################################################################', '##############................##################################################', '#..............................................................................#', '#..............................................................................#', '#..............................................................................#', '#..............###....###......................................................#', '#............................###...............................................#', '#.........###....................#####.#.......................................#', '#.......................................#..........#...........................#', '........................................####.....###...........................#', '.......###.........................................##..........................#', '...##...............................................#..........................#', '..##...............................................####........................#', '####........................................................##.................#', '#..............................................................................#', '#.................................................................###..........#', '#..............................................................#...............#', '#.............................................................##...............#', '#...................................................#....##....###.............#', '#...................................................#..........................#', '#..................................................##...........................', '#..........................................####.....###.........................', '#..........................................##................................###', '#................................##.....#####..................................#', '#..........................................###........................###......#', '#..............................................................................#', '#..............................#...............................................#', '#..............................#...............................###.............#', '#...........................####...............................................#', '#..............................................................................#', '#.....................#.......................................#................#', '#........#............#....................................####....#...........#', '#........##...........###..........................................#...........#', '#.......###..................##........................###........###..........#', '#.......####.................###..................................####.......###', '#......#####................####..................###...........########....####', '##############.....########################..#################..################', '#############.....#########################..#################..################', '############.....##########################..#################..################', '###########.....###########################..#################..################'],
    },
    "cavern_-1_2": {
        'spawn_left': (2, 17),
        'spawn_right': (77, 14),
        'spawn_down': (27, 36),
        'exits': {'right': 'cavern_0_3', 'left': 'cavern_-2_1', 'down': 'cavern_-101_2'},
        'layout': ['################################################################################', '################################################################################', '################################################################################', '##############...........................................#######################', '#######........................................................................#', '#####.................................##.......................................#', '###....................................##......................................#', '##.............###....###.......##.............................................#', '##.............................................................................#', '##........###..................................................................#', '##.........................B#................BB................................#', '##.............................................................................#', '#######..#.....................................................................#', '#####........................................................................###', '####..............................................BB###.........................', '###.....B#..................................................##..................', '##..........................................................................####', '..................................................................####.......###', '.............................................................................###', '......BB###..................................................................###', '........###..............................................######...............##', '####.....#.....#####........................................###...............##', '##.......................####......................##........#....###.........##', '##........................##........................#...............##........##', '##.........................................................................#####', '##...............................###......#####..............................###', '##.........................................##.........................###....###', '##..........................................#................................###', '##...............................................................###..........##', '##.............................................................####...........##', '##............................................................................##', '##............................................................................##', '##.........................................................#..................##', '##.......#.................................................####....#..........##', '##.......##........................................................#..........##', '##......###..............................#........................###.........##', '##......####.............................#........................####.......###', '##.....#####............................###.....................########....####', '#######################...........##############################################', '#############################.....############################################'],
    },
    "cavern_-101_2": {
        'spawn_right': (75, 12),
        'spawn_up': (22, 3),
        'exits': {'right': 'cavern_100_3', 'up': 'cavern_-1_2'},
        'layout': ['###################......#######################################################', '####################.....#######################################################', '#####################.....######################################################', '######################...................................#######################', '######################.........................................................#', '#####...........#######........................................................#', '###........................B...................................................#', '##.......................BBB...................................................#', '##.............................................................................#', '##.............................................................................#', '##.............................................................................#', '##............................BB...............................................#', '##...........................................................................###', '####.........................................................................###', '###..........................................................................###', '##................................BB............................................', '##..............................................................................', '##.......................................................................#######', '##...........................................................................###', '##...................................BB..............................BBB.....###', '##...........................................................................###', '##............................................................................##', '##.............................................................BBB............##', '##.......................................BB....BB.....BBB.....................##', '##............................................................................##'],
    },
    "cavern_100_3": {
        'spawn_right': (75, 12),
        'spawn_up': (22, 3),
        'spawn_left': (4, 14),
        'exits': {'right': 'cavern_101_4', 'left': 'cavern_-101_2', 'up': 'cavern_0_3'},
        'layout': ['###################......#######################################################', '##################.......#######################################################', '##################..##....######################################################', '#########.....................#..........................#######################', '########...................#####.........................................#######', '#####.......###########....##...............................................####', '###...........................................................................##', '##..................................#########.................................##', '##......###.....############....####........###...............................##', '##......##...............#....................................................##', '##.....###...............#....................................................##', '##......###..............#######################################################', '##........##.................................................................###', '####.....########............................................................###', '.......##.......###................................#####.....................###', '..................####.......................................................###', '.........................#####...............................................###', '########..........................###...................###..................###', '#####.....................................#####BB...............................', '####.........................................................##.................', '###...........................................................###...............', '###....................................................................#########', '##............................................................................##', '##............................................................................##', '##............................................................................##'],
    },
    "cavern_101_4": {
        'spawn_left': (3, 31),
        'spawn_right': (77, 35),
        'exits': {'left': 'cavern_100_3', 'right': 'cavern_102_5'},
        'item': 'Echo',
        'collected': False,
        'csv': 'cavern_101_4.csv',
    },
    "cavern_102_5": {
        'spawn_left': (2, 51),
        'spawn_up': (90, 5),
        'exits': {'left': 'cavern_101_4', 'up': 'cavern_2_5'},
        'csv': 'cavern_102_5.csv',
        'interact_zone': pygame.Rect(2064, 1120, 128, 192),
    },
    "cavern_-2_1": {
        'spawn_right': (77, 27),
        'exits': {'right': 'cavern_-1_2'},
        'csv': 'cavern_-2_1.csv',
    },
    "cavern_2_5": {
        'spawn_left': (3, 27),
        'spawn_down': (53, 55),
        'exits': {'down': 'cavern_102_5', 'left': 'cavern_1_4'},
        'death_zone': [pygame.Rect(0, 1888, 1568, 80)],
        'csv': 'cavern_2_5.csv',
    },
    "room_5": {
        'spawn_left': (1, 58),
        'spawn_right': (77, 31),
        'exits': {'left': 'room_4', 'right': 'room_6'},
        'csv': 'room_5.csv',
    },
    "room_6": {
        'spawn_left': (4, 38),
        'spawn_right': (76, 60),
        'spawn_up': (50, 5),
        'exits': {'left': 'room_5', 'right': 'room_7', 'up': 'glacier_1'},
        'csv': 'room_6.csv',
    },
    "glacier_1": {
        'spawn_down': (20, 115),
        'spawn_up': (17, 2),
        'exits': {'down': 'room_6', 'up': 'glacier_101'},
        'death_zone': [pygame.Rect(0, 2592, 960, 64)],
        'csv': 'glacier_1.csv',
        'title': 'The Glacier',
    },
    "glacier_101": {
        'spawn_down': (17, 77),
        'exits': {'down': 'glacier_1'},
        'item': 'Regret',
        'collected': False,
        'csv': 'glacier_101.csv',
    },
    "room_7": {
        'spawn_left': (5, 70),
        'spawn_right': (77, 56),
        'exits': {#'right': 'room_8', 
                  'left': 'room_6'},
        'csv': 'room_7.csv',
    },
    "factory_1": {
        'spawn_right': (97, 77),
        'spawn_left': (3, 56),
        'exits': {'right': 'room_1', 'left': 'factory_2'},
        'csv': 'factory_1.csv',
        'title': 'The Foundry',
    },
    "factory_2": {
        'spawn_right': (95, 78),
        'spawn_left': (1, 63),
        'spawn_up': (48, 3),
        'exits': {'right': 'factory_1', 'left': 'factory_3', 'up': 'factory_102'},
        'csv': 'factory_2.csv',
    },
    "factory_3": {
        'spawn_left': (3, 34),
        'spawn_right': (97, 60),
        'exits': {'left': 'factory_4', 'right': 'factory_2'},
        'csv': 'factory_3.csv',
    },
    "factory_102": {
        'spawn_down': (21, 117),
        'spawn_up': (20, 3),
        'exits': {'up': 'factory_1002', 'down': 'factory_2'},
        'csv': 'factory_102.csv',
    },
    "factory_1002": {
        'spawn_down': (68, 116),
        'spawn_left': (1, 26),
        'spawn_right': (117, 56),
        'spawn_up': (105, 5),
        'csv': 'factory_1002.csv',
        'exits': {'down': 'factory_102', 'left': 'factory_1003', "right": "factory_1001", 'up':"factory_10002"},
        'death_zone': [pygame.Rect(96, 3808, 1408, 70), pygame.Rect(2176, 3808, 1700, 70)],
        'item': 'Clarity',
        'collected': False,
    },
    "factory_1003": {
        'spawn_right': (116, 72),
        'spawn_left': (3, 51),
        'spawn_up': (67, 6),
        'exits': {'right': 'factory_1002', 'left': 'factory_1004', 'up': 'factory_10003'},
        'csv': 'factory_1003.csv',
    },
    "factory_1004": {
        'spawn_right': (196, 40),
        'exits': {'right': 'factory_1003'},
        'csv': 'factory_1004.csv',
        'item': 'Promise',
        'collected': False
    },
    "factory_10003": {
        'exits': {'down': 'factory_1003', 'right': 'factory_10002', 
                  #'up': 'overforge_1'
                },
        'spawn_down': (4, 95),
        'spawn_right': (97, 43),
        'csv': 'factory_10003.csv',
    },
    "factory_10002": {
        'spawn_left': (1, 38),
        'spawn_right': (96, 17),
        "spawn_down": (76,74),
        'exits': {'left': 'factory_10003', 'right': 'factory_10001', "down": "factory_1002"},
        'csv': 'factory_10002.csv',
        "death_zone": [pygame.Rect(0,2528, 2176, 70), pygame.Rect(2752,2528, 448, 64)]
    },
    "factory_10001": {
        'spawn_left': (2, 59),
        'spawn_up': (40, 8),
        'spawn_right': (95, 49),
        'exits': {'right': 'factory_10000', 'left': 'factory_10002', 'up': 'nrevac_1'},
        'csv': 'factory_10001.csv',
    },
    "factory_10000": {
        'spawn_left': (2, 66),
        'exits': {'left': 'factory_10001'},
        'csv': 'factory_10000.csv',
        'item': 'Hope',
        'collected': False,
    },
    "nrevac_1": {
        'spawn_down': (60, 61),
        'spawn_left': (3, 68),
        'spawn_right': (96, 36),
        'csv': 'nrevac_1.csv',
        'exits': {'right': 'nrevac_2', 'left': 'nrevac_0', 'down': 'factory_10001'},
        'title': 'NR3VAC',
    },
    "nrevac_0": {
        'spawn_left': (5, 50),
        'spawn_right': (94, 43),
        'exits': {'left': 'nrevac_-1', 'right': 'nrevac_2'},
        'csv': 'nrevac_0.csv',
    },
    "nrevac_-1": {
        'exits': {'left': 'nrevac_-2', 'right': 'nrevac_-3'},
        'csv': 'nrevac_-1.csv',
        'spawn_left': (5, 50),
        'spawn_right': (94, 43),
    },
    "nrevac_-2": {
        'exits': {'left': 'nrevac_-3', 'right': 'nrevac_101'},
        'csv': 'nrevac_-2.csv',
        'spawn_left': (5, 50),
        'spawn_right': (94, 43),
    },
    "nrevac_-3": {
        'spawn_left': (6, 35),
        'spawn_right': (95, 28),
        'exits': {'left': 'nrevac_7', 'right': 'nrevac_-1'},
        'csv': 'nrevac_-3.csv',
    },
    "nrevac_2": {
        'spawn_left': (3, 47),
        'spawn_right': (97, 22),
        "spawn_up": (81,2),
        'exits': {'left': 'nrevac_3', 'right': 'nrevac_3', 'up': 'nrevac_102'},
        'csv': 'nrevac_2.csv',
    },
    "factory_4": {
        'spawn_right': (37, 27),
        'exits': {'right': 'factory_3'},
        'csv': 'factory_4.csv',
    },
    "nrevac_3": {
        'spawn_left': (2, 27),
        'spawn_right': (97, 35),
        'exits': {'left': 'nrevac_2', 'right': 'nrevac_4'},
        'csv': 'nrevac_3.csv',
    },
    "nrevac_4": {
        'spawn_left': (3, 33),
        'spawn_right': (76, 43),
        'exits': {'left': 'nrevac_3', 'right': 'nrevac_5'},
        'csv': 'nrevac_4.csv',
    },
    "nrevac_102": {
        'spawn_left': (3, 20),
        'spawn_right': (75, 16),
        'spawn_down': (46, 68),
        'exits': {'down': 'nrevac_2', 'left': 'nrevac_101', 'right': 'nrevac_103'},
        'csv': 'nrevac_102.csv',
    },
    "nrevac_5": {
        "spawn_left": (2, 21),
        "spawn_right": (77,37),
        "exits": {
            "left": "nrevac_4", 
            "right": "nrevac_6"
        },
        "csv": "nrevac_5.csv"
    },
    "nrevac_7": {
        "spawn_left": (2,40), 
        "spawn_right": (76, 42),
        "exits": {
            "left": "nrevac_1", "right": "nrevac_8"
        },
        "csv": "nrevac_7.csv"
    },
    "nrevac_6": {
        "spawn_left": (2,37),
        "spawn_right": (77,44),
        "exits": {
            "right": "nrevac_7",
            "left": "nrevac_5"
        },
        "csv": "nrevac_6.csv"
    },
    "nrevac_8": {
        "spawn_left": (3,42),
        "spawn_right": (78,36),
        "exits": {
            "left": "nrevac_1", "right": "nrevac_-2" #lol
        },
        "csv": "nrevac_8.csv"
    },
    "nrevac_101": {
        "spawn_left": (3,32),
        "spawn_right": (77,25),
        "exits": {"left": "nrevac_100", 
                  "right": "nrevac_102"},
        "csv": "nrevac_101.csv"
    },
    "nrevac_100": {
        "spawn_right": (77,40),
        "exits": {
            "right": "nrevac_104"
        },
        "csv": "nrevac_100.csv"
    },
    "nrevac_103": {
        "spawn_left": (3,34), "spawn_right": (76,40),
        "exits": {"left": "nrevac_102", "right": "nrevac_101"},
        "csv": "nrevac_103.csv",
        "item": "Lobe Coil",
        "collected": False
    },
    "nrevac_104": {
        "spawn_right": (78,40), "spawn_left": (2,40),
        "exits": {
            "left": "nrevac_102", "right": "nrevac_101"
        },
        "csv": "nrevac_104.csv"
    }
    ,"factory_4": {"spawn_right": (77,37), "spawn_left": (4,28),"csv": "factory_4.csv", "exits": 
                   {
                       "left": 'factory_5',
                       "right": "factory_3"
                   }},
    "factory_5": {"spawn_left": (2,38), "spawn_right": (78, 38),
                  "spawn_up": (32,4),
                  "exits": {
                      "right": "factory_4", 
                      'left': 'pipeworks_1', 
                      'up': 'factory_105'
                  },
                  'csv': "factory_5.csv"

    },
    "factory_105": {
        "exits": {
            "down": "factory_5", 
           # "up": "shaft_1",

        },
        "csv": "factory_105.csv",
        "spawn_down": (47,75),
        "interact_zone": pygame.Rect(1792,1632,224,320)
    },
    "pipeworks_1": {
        "exits": {
           # "down": "drains_1",
           # "left": "pipeworks_2",
            "right":"factory_5",
          #  "up": "pipeworks_100"
        },
        "spawn_up": (40,6),
        "spawn_down": (40,76),
        "spawn_left": (5,47),
        "spawn_right": (75,47),
        "csv": "pipeworks_1.csv",
        "title": "The Pipeworks"
    },

    "factory_1001": {
        "spawn_left": (3,64),
        "csv": "factory_1001.csv",
        "exits": {
            "left": "factory_1002"
        }
    }
}